.scene-root {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  border-radius: 4px;
}

/* All layers stack absolutely */
.scene-layer {
  position: absolute;
  inset: 0;
}

/* Layer ordering */
.layer-background { z-index: 1; }
.layer-window     { z-index: 2; pointer-events: none; }
.layer-objects    { z-index: 3; }
.layer-overlay    { z-index: 4; pointer-events: none; mix-blend-mode: multiply; }
.layer-vignette   { z-index: 5; pointer-events: none; }

/* Vignette */
.layer-vignette {
  background: radial-gradient(
    ellipse 80% 80% at 50% 50%,
    transparent 40%,
    rgba(0, 0, 0, 0.55) 100%
  );
}

/* ============ Window frame ============ */
.window-frame {
  position: absolute;
  inset: 0;
}

.window-cross-h {
  position: absolute;
  top: 50%;
  left: 0; right: 0;
  height: 14px;
  background: linear-gradient(180deg, #3a2e22 0%, #4a3a2a 50%, #2e2418 100%);
  transform: translateY(-50%);
  box-shadow: 0 2px 8px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,220,150,0.15);
}

.window-cross-v {
  position: absolute;
  left: 50%;
  top: 0; bottom: 0;
  width: 14px;
  background: linear-gradient(90deg, #3a2e22 0%, #4a3a2a 50%, #2e2418 100%);
  transform: translateX(-50%);
  box-shadow: 2px 0 8px rgba(0,0,0,0.6), inset 1px 0 0 rgba(255,220,150,0.15);
}

.window-sill {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 22px;
  background: linear-gradient(180deg, #4a3a2a 0%, #3a2e20 60%, #241e15 100%);
  box-shadow: 0 -2px 12px rgba(0,0,0,0.8);
}

.window-pane {
  position: absolute;
  border: 12px solid transparent;
}

.window-pane.top-left    { top: 0; left: 0; right: 50%; bottom: 50%; }
.window-pane.top-right   { top: 0; left: 50%; right: 0; bottom: 50%; }
.window-pane.bottom-left { top: 50%; left: 0; right: 50%; bottom: 0; }
.window-pane.bottom-right{ top: 50%; left: 50%; right: 0; bottom: 0; }

/* Glass reflection shimmer on each pane */
.window-pane::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.06) 0%,
    transparent 40%,
    rgba(255, 255, 255, 0.02) 100%
  );
  pointer-events: none;
}

/* ============ Shared detail elements ============ */

.detail-star {
  position: absolute;
  background: #fff;
  border-radius: 50%;
  animation: twinkle 2s ease-in-out infinite alternate;
}

@keyframes twinkle {
  from { opacity: 0.2; transform: scale(0.8); }
  to   { opacity: 0.9; transform: scale(1.2); }
}

/* ============ Forest Night ============ */

.detail-moon {
  position: absolute;
  top: 12%;
  right: 22%;
  width: 48px;
  height: 48px;
  background: radial-gradient(circle, #fffae0 0%, #f5e8a0 60%, #c8b84020 100%);
  border-radius: 50%;
  box-shadow: 0 0 40px 12px rgba(255, 240, 160, 0.25), 0 0 80px 30px rgba(255, 230, 120, 0.1);
}

.detail-trees {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 55%;
  background:
    radial-gradient(ellipse 6% 20% at 15% 100%, #0d1a0d 0%, transparent 100%),
    radial-gradient(ellipse 8% 30% at 25% 100%, #0a160a 0%, transparent 100%),
    radial-gradient(ellipse 6% 22% at 38% 100%, #0d1a0d 0%, transparent 100%),
    radial-gradient(ellipse 10% 35% at 55% 100%, #081408 0%, transparent 100%),
    radial-gradient(ellipse 7% 25% at 68% 100%, #0a160a 0%, transparent 100%),
    radial-gradient(ellipse 8% 28% at 78% 100%, #0d1a0d 0%, transparent 100%),
    radial-gradient(ellipse 6% 20% at 88% 100%, #0a160a 0%, transparent 100%);
}

/* ============ Snowy Cabin ============ */

.detail-snow-ground {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 30%;
  background: linear-gradient(180deg, transparent 0%, rgba(210, 228, 242, 0.65) 100%);
}

.detail-snowflake {
  position: absolute;
  top: -20px;
  color: rgba(255, 255, 255, 0.75);
  animation: snowfall linear infinite;
  user-select: none;
}
.detail-snowflake::before { content: '‚ùÑ'; }

@keyframes snowfall {
  from { transform: translateY(-20px) rotate(0deg); opacity: 0; }
  10%  { opacity: 1; }
  90%  { opacity: 0.8; }
  to   { transform: translateY(100vh) rotate(360deg); opacity: 0; }
}

/* ============ Rainy City ============ */

.detail-city-lights {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 60%;
  background:
    radial-gradient(ellipse 5% 10% at 10% 70%, rgba(255, 220, 100, 0.30) 0%, transparent 100%),
    radial-gradient(ellipse 3% 6%  at 20% 65%, rgba(100, 180, 255, 0.20) 0%, transparent 100%),
    radial-gradient(ellipse 6% 12% at 35% 75%, rgba(255, 150, 80,  0.25) 0%, transparent 100%),
    radial-gradient(ellipse 4% 8%  at 55% 68%, rgba(200, 220, 255, 0.20) 0%, transparent 100%),
    radial-gradient(ellipse 5% 10% at 70% 72%, rgba(255, 200, 100, 0.25) 0%, transparent 100%),
    radial-gradient(ellipse 3% 6%  at 82% 67%, rgba(150, 200, 255, 0.20) 0%, transparent 100%),
    radial-gradient(ellipse 4% 8%  at 92% 74%, rgba(255, 180, 60,  0.20) 0%, transparent 100%);
}

.detail-raindrop {
  position: absolute;
  top: 0;
  width: 1px;
  background: linear-gradient(180deg, transparent 0%, rgba(160, 200, 255, 0.55) 100%);
  animation: raindrop linear infinite;
}

.detail-raindrop-heavy {
  width: 1.5px;
  background: linear-gradient(180deg, transparent 0%, rgba(140, 185, 255, 0.65) 100%);
}

.detail-raindrop-soft {
  background: linear-gradient(180deg, transparent 0%, rgba(180, 210, 255, 0.35) 100%);
}

@keyframes raindrop {
  from { transform: translateY(-20px); opacity: 0; }
  10%  { opacity: 1; }
  to   { transform: translateY(100vh); opacity: 0.3; }
}

/* ============ Autumn Garden ============ */

.detail-autumn-ground {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 18%;
  background: linear-gradient(180deg, transparent 0%, rgba(80, 35, 8, 0.50) 100%);
}

.detail-leaf {
  position: absolute;
  top: -20px;
  animation: leafFall ease-in-out infinite;
  user-select: none;
}
.detail-leaf::before { content: 'üçÇ'; }

@keyframes leafFall {
  0%   { transform: translateY(-20px) rotate(0deg) translateX(0); opacity: 0; }
  10%  { opacity: 1; }
  50%  { transform: translateY(45vh) rotate(180deg) translateX(30px); }
  90%  { opacity: 0.8; }
  100% { transform: translateY(100vh) rotate(360deg) translateX(-20px); opacity: 0; }
}

/* ============ Ocean Coast ============ */

.detail-ocean-horizon {
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 55%;
  background: linear-gradient(
    180deg,
    rgba(8, 18, 40, 0) 0%,
    rgba(10, 50, 90, 0.4) 80%,
    rgba(14, 70, 100, 0.6) 100%
  );
}

.detail-ocean-water {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 48%;
  background:
    linear-gradient(
      180deg,
      rgba(14, 70, 110, 0.6) 0%,
      rgba(10, 55, 90, 0.8) 50%,
      rgba(20, 90, 80, 0.9) 100%
    );
  animation: oceanSurface 8s ease-in-out infinite;
}

@keyframes oceanSurface {
  0%, 100% { transform: scaleY(1) translateY(0); }
  50%       { transform: scaleY(1.015) translateY(-3px); }
}

.detail-wave {
  position: absolute;
  left: -10%;
  right: -10%;
  height: 12px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(180, 220, 240, 0.25) 20%,
    rgba(200, 235, 255, 0.45) 50%,
    rgba(180, 220, 240, 0.25) 80%,
    transparent 100%
  );
  border-radius: 50%;
  animation: waveRoll 5s ease-in-out infinite;
}

@keyframes waveRoll {
  0%   { transform: translateX(-5%) scaleY(0.8); opacity: 0; }
  15%  { opacity: 1; }
  80%  { opacity: 0.6; }
  100% { transform: translateX(5%) scaleY(1.2); opacity: 0; }
}

.detail-sea-foam {
  position: absolute;
  height: 3px;
  background: rgba(220, 240, 255, 0.50);
  border-radius: 2px;
  animation: foamFade 3s ease-in-out infinite;
}

@keyframes foamFade {
  0%, 100% { opacity: 0; transform: scaleX(0.6); }
  40%  { opacity: 1; transform: scaleX(1); }
  70%  { opacity: 0.5; }
}

/* ============ Thunderstorm ============ */

.detail-storm-clouds {
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 55%;
  background:
    radial-gradient(ellipse 60% 40% at 30% 20%, rgba(30, 20, 50, 0.9) 0%, transparent 100%),
    radial-gradient(ellipse 50% 35% at 70% 15%, rgba(25, 15, 45, 0.85) 0%, transparent 100%),
    radial-gradient(ellipse 70% 30% at 50% 35%, rgba(20, 12, 40, 0.8) 0%, transparent 100%);
  animation: cloudShift 12s ease-in-out infinite alternate;
}

@keyframes cloudShift {
  from { transform: translateX(0); }
  to   { transform: translateX(2%); }
}

.detail-lightning-flash {
  position: absolute;
  inset: 0;
  background: rgba(200, 220, 255, 0);
  animation: lightningFlash 8s ease-in-out infinite;
  pointer-events: none;
}

@keyframes lightningFlash {
  0%, 88%, 92%, 96%, 100% { background: rgba(200, 220, 255, 0); }
  89%  { background: rgba(200, 220, 255, 0.18); }
  90%  { background: rgba(200, 220, 255, 0.04); }
  91%  { background: rgba(200, 220, 255, 0.14); }
  93%  { background: rgba(180, 200, 255, 0.08); }
}

/* ============ Coffee Shop ============ */

.detail-cafe-window-rain {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    180deg,
    rgba(30, 10, 0, 0.1) 0%,
    rgba(60, 20, 0, 0.05) 100%
  );
}

.detail-cafe-lights {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 65%;
  background:
    radial-gradient(ellipse 30% 25% at 25% 60%, rgba(255, 180, 60, 0.18) 0%, transparent 100%),
    radial-gradient(ellipse 25% 20% at 60% 55%, rgba(255, 160, 40, 0.14) 0%, transparent 100%),
    radial-gradient(ellipse 20% 18% at 82% 65%, rgba(255, 200, 80, 0.12) 0%, transparent 100%);
}

.detail-cafe-steam {
  position: absolute;
  bottom: 30%;
  left: 40%;
  width: 20px;
  height: 40px;
  background: transparent;
  animation: steamRise 3s ease-in-out infinite;
}

.detail-cafe-steam::before,
.detail-cafe-steam::after {
  content: '';
  position: absolute;
  width: 6px;
  height: 20px;
  background: linear-gradient(180deg, transparent, rgba(255,240,220,0.15), transparent);
  border-radius: 50%;
}

.detail-cafe-steam::before { left: 0; animation: steamWiggle 2.5s ease-in-out infinite; }
.detail-cafe-steam::after  { left: 10px; animation: steamWiggle 2.5s ease-in-out 0.8s infinite; }

@keyframes steamRise {
  0%, 100% { opacity: 0; transform: translateY(0); }
  20%  { opacity: 1; }
  80%  { opacity: 0.3; }
  100% { transform: translateY(-30px); }
}

@keyframes steamWiggle {
  0%, 100% { transform: translateX(0) scaleX(1); }
  50%  { transform: translateX(4px) scaleX(1.3); }
}

/* ============ Mountain Peak ============ */

.detail-mountain-range {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 65%;
  background:
    /* Near peaks */
    radial-gradient(ellipse 35% 50% at 20% 100%, #141a28 0%, transparent 60%),
    radial-gradient(ellipse 45% 60% at 50% 100%, #0e141e 0%, transparent 65%),
    radial-gradient(ellipse 35% 48% at 80% 100%, #121828 0%, transparent 60%),
    /* Far range */
    radial-gradient(ellipse 60% 30% at 35% 100%, #1a2040 0%, transparent 50%),
    radial-gradient(ellipse 50% 25% at 65% 100%, #162038 0%, transparent 45%);
}

.detail-mountain-snow {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 65%;
  background:
    /* Snow caps */
    radial-gradient(ellipse 12% 8% at 20% 36%, rgba(220, 230, 245, 0.6) 0%, transparent 100%),
    radial-gradient(ellipse 16% 10% at 50% 30%, rgba(215, 228, 242, 0.65) 0%, transparent 100%),
    radial-gradient(ellipse 10% 7%  at 80% 38%, rgba(220, 230, 245, 0.55) 0%, transparent 100%);
}

.detail-milky-way {
  position: absolute;
  top: 5%;
  left: 0; right: 0;
  height: 40%;
  background: linear-gradient(
    120deg,
    transparent 0%,
    rgba(100, 130, 180, 0.06) 30%,
    rgba(140, 160, 200, 0.10) 50%,
    rgba(100, 130, 180, 0.06) 70%,
    transparent 100%
  );
  transform: rotate(-15deg) scaleY(2);
  animation: milkyWayGlow 6s ease-in-out infinite alternate;
}

@keyframes milkyWayGlow {
  from { opacity: 0.6; }
  to   { opacity: 1.0; }
}

/* ============ Japanese Garden ============ */

.detail-garden-ground {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 35%;
  background:
    linear-gradient(180deg, transparent 0%, rgba(10, 28, 18, 0.7) 100%),
    radial-gradient(ellipse 80% 30% at 50% 100%, rgba(20, 50, 30, 0.5) 0%, transparent 70%);
}

.detail-bamboo-grove {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 80%;
  background:
    /* Bamboo stalks */
    linear-gradient(180deg, transparent 0%, rgba(16, 38, 22, 0.3) 100%),
    repeating-linear-gradient(
      90deg,
      transparent 0px,
      transparent 28px,
      rgba(12, 30, 18, 0.45) 29px,
      rgba(18, 44, 26, 0.55) 32px,
      rgba(12, 30, 18, 0.45) 33px,
      transparent 34px,
      transparent 52px,
      rgba(10, 26, 16, 0.38) 53px,
      rgba(16, 38, 22, 0.48) 56px,
      rgba(10, 26, 16, 0.38) 57px,
      transparent 58px
    );
}

.detail-petal {
  position: absolute;
  animation: petalDrift ease-in-out infinite;
  user-select: none;
  opacity: 0;
}
.detail-petal::before { content: 'üå∏'; }

@keyframes petalDrift {
  0%   { transform: translateY(-10px) rotate(0deg) translateX(0); opacity: 0; }
  10%  { opacity: 0.6; }
  50%  { transform: translateY(35vh) rotate(120deg) translateX(20px); }
  90%  { opacity: 0.3; }
  100% { transform: translateY(80vh) rotate(280deg) translateX(-15px); opacity: 0; }
}

.detail-lantern {
  position: absolute;
  bottom: 20%;
  left: 18%;
  width: 12px;
  height: 18px;
  background: radial-gradient(circle, rgba(255, 180, 60, 0.5) 0%, transparent 70%);
  border-radius: 50%;
  box-shadow: 0 0 20px 10px rgba(255, 160, 40, 0.2);
  animation: lanternFlicker 3s ease-in-out infinite;
}

@keyframes lanternFlicker {
  0%, 100% { opacity: 0.8; transform: scale(1); }
  30%  { opacity: 1.0; transform: scale(1.05); }
  65%  { opacity: 0.7; transform: scale(0.95); }
}

/* ============ Deep Forest ============ */

.detail-deep-canopy {
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 55%;
  background:
    radial-gradient(ellipse 40% 35% at 25% 0%, rgba(8, 20, 10, 0.95) 0%, transparent 100%),
    radial-gradient(ellipse 50% 40% at 60% 0%, rgba(6, 16, 8, 0.90) 0%, transparent 100%),
    radial-gradient(ellipse 35% 30% at 85% 5%, rgba(8, 20, 10, 0.85) 0%, transparent 100%),
    radial-gradient(ellipse 30% 25% at 10% 10%, rgba(6, 16, 8, 0.80) 0%, transparent 100%);
}

.detail-deep-ground {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 40%;
  background:
    linear-gradient(180deg, transparent 0%, rgba(4, 14, 6, 0.80) 100%),
    radial-gradient(ellipse 6% 18% at 15% 100%, #040e06 0%, transparent 100%),
    radial-gradient(ellipse 8% 25% at 30% 100%, #030c05 0%, transparent 100%),
    radial-gradient(ellipse 10% 30% at 50% 100%, #040e06 0%, transparent 100%),
    radial-gradient(ellipse 7% 22% at 70% 100%, #030c05 0%, transparent 100%),
    radial-gradient(ellipse 6% 18% at 85% 100%, #040e06 0%, transparent 100%);
}

.detail-spore {
  position: absolute;
  width: 3px;
  height: 3px;
  background: rgba(100, 180, 120, 0.7);
  border-radius: 50%;
  box-shadow: 0 0 6px 2px rgba(80, 160, 100, 0.4);
  animation: sporeDrift ease-in-out infinite;
}

@keyframes sporeDrift {
  0%, 100% { opacity: 0; transform: translate(0, 0) scale(0.5); }
  25%  { opacity: 1; transform: translate(8px, -12px) scale(1); }
  50%  { opacity: 0.7; transform: translate(-5px, -22px) scale(0.8); }
  75%  { opacity: 0.4; transform: translate(12px, -32px) scale(0.6); }
}

.detail-forest-mist {
  position: absolute;
  bottom: 20%;
  left: 0; right: 0;
  height: 25%;
  background: linear-gradient(
    180deg,
    transparent 0%,
    rgba(40, 80, 50, 0.12) 40%,
    rgba(30, 60, 40, 0.18) 70%,
    transparent 100%
  );
  animation: mistDrift 10s ease-in-out infinite alternate;
}

@keyframes mistDrift {
  from { transform: translateX(-2%); opacity: 0.6; }
  to   { transform: translateX(2%);  opacity: 1.0; }
}
